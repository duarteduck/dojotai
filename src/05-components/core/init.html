<script>
    /**
     * ============================================================================
     * INICIALIZA√á√ÉO CENTRALIZADA DO SISTEMA
     * Garante que cada componente seja inicializado apenas UMA VEZ
     * ============================================================================
     */

    // Flag para prevenir inicializa√ß√£o duplicada
    console.log('üìç init.html carregado - systemInitialized:', window.systemInitialized);

    if (!window.systemInitialized) {
        window.systemInitialized = false;

        /**
         * Inicializa√ß√£o principal do sistema
         * Chamado UMA √öNICA VEZ quando o DOM est√° pronto
         */
        function initSystem() {
            console.log('üîç initSystem() chamado - Flag atual:', window.systemInitialized);

            if (window.systemInitialized) {
                console.warn('‚ö†Ô∏è Sistema j√° foi inicializado, pulando...');
                return;
            }

            console.log('üöÄ Iniciando sistema...');
            window.systemInitialized = true;

            // 1. Carregar tema salvo
            if (typeof loadTheme === 'function') {
                loadTheme();
            }

            // 2. Inicializar navega√ß√£o
            if (typeof initNavigation === 'function') {
                initNavigation();
            }

            // 3. Inicializar menu dropdown do usu√°rio
            if (typeof initUserMenuDropdown === 'function') {
                initUserMenuDropdown();
            }

            // 4. Verificar autentica√ß√£o e mostrar tela apropriada
            if (typeof checkAuthAndInit === 'function') {
                checkAuthAndInit();
            }

            console.log('‚úÖ Sistema inicializado com sucesso');
        }

        // Executar quando DOM estiver pronto
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initSystem);
        } else {
            // DOM j√° carregado
            initSystem();
        }
    }
</script>
